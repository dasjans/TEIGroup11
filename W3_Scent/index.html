<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Scent Heads Up</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      :root {
        --bg: #111827;
        --bg-alt: #020617;
        --card: #1f2937;
        --accent: #f97316;
        --accent-soft: rgba(249, 115, 22, 0.12);
        --text: #e5e7eb;
        --muted: #9ca3af;
        --danger: #ef4444;
        --success: #22c55e;
        --radius: 16px;
        --shadow-soft: 0 18px 45px rgba(0, 0, 0, 0.4);
      }

      * {
        box-sizing: border-box;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
          "Segoe UI", sans-serif;
      }

      body {
        margin: 0;
        padding: 0;
        background: radial-gradient(
          circle at top,
          #1f2937 0,
          #020617 45%,
          #000 100%
        );
        color: var(--text);
        min-height: 100vh;
        display: flex;
        align-items: stretch;
        justify-content: center;
      }

      .app {
        width: 100%;
        max-width: 900px;
        margin: 20px;
        padding: 24px 24px 32px;
        background: linear-gradient(
          145deg,
          rgba(15, 23, 42, 0.96),
          rgba(15, 23, 42, 0.9)
        );
        border-radius: 24px;
        box-shadow: var(--shadow-soft);
        border: 1px solid rgba(148, 163, 184, 0.3);
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 16px;
        border-bottom: 1px solid rgba(148, 163, 184, 0.35);
        padding-bottom: 12px;
      }

      header h1 {
        margin: 0;
        font-size: 1.4rem;
        letter-spacing: 0.04em;
        text-transform: uppercase;
        color: #e5e7eb;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      header h1 span.icon {
        font-size: 1.5rem;
      }

      .scoreboard {
        text-align: right;
        font-size: 0.83rem;
        color: var(--muted);
      }

      .scoreboard span {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        padding: 4px 8px;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.8);
        border: 1px solid rgba(148, 163, 184, 0.3);
        margin-left: 6px;
      }

      .scoreboard .correct {
        color: var(--success);
        border-color: rgba(34, 197, 94, 0.4);
      }

      .scoreboard .rounds {
        color: var(--muted);
      }

      main {
        display: grid;
        grid-template-columns: 1.15fr 0.85fr;
        gap: 18px;
      }

      @media (max-width: 800px) {
        main {
          grid-template-columns: 1fr;
        }
      }

      .panel {
        background: radial-gradient(
          circle at top left,
          rgba(15, 23, 42, 0.9),
          #020617
        );
        border-radius: var(--radius);
        padding: 16px 18px 18px;
        border: 1px solid rgba(55, 65, 81, 0.8);
        box-shadow: 0 10px 35px rgba(0, 0, 0, 0.35);
      }

      .panel h2 {
        margin: 0 0 10px;
        font-size: 1rem;
        text-transform: uppercase;
        letter-spacing: 0.12em;
        color: var(--muted);
      }

      .categories {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
      }

      .category-btn {
        flex: 1 1 30%;
        min-width: 140px;
        border-radius: 999px;
        padding: 10px 14px;
        background: #020617;
        border: 1px solid rgba(148, 163, 184, 0.6);
        color: var(--text);
        font-size: 0.9rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        transition: all 0.15s ease;
      }

      .category-btn span.label {
        text-align: left;
      }

      .category-btn span.pill {
        font-size: 0.7rem;
        padding: 3px 7px;
        border-radius: 999px;
        background: rgba(148, 163, 184, 0.18);
        color: var(--muted);
      }

      .category-btn:hover {
        border-color: var(--accent);
        background: radial-gradient(
          circle at top,
          rgba(249, 115, 22, 0.15),
          #020617
        );
        transform: translateY(-1px);
      }

      .category-btn.active {
        border-color: var(--accent);
        box-shadow: 0 0 0 1px rgba(249, 115, 22, 0.6);
        background: radial-gradient(
          circle at top left,
          var(--accent-soft),
          #020617
        );
      }

      .status-line {
        margin-top: 10px;
        font-size: 0.9rem;
        color: var(--muted);
        display: flex;
        align-items: center;
        gap: 6px;
      }

      .dot {
        width: 8px;
        height: 8px;
        border-radius: 999px;
        background: #4b5563;
      }

      .dot.live {
        background: var(--accent);
        box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.5);
      }

      .round-info {
        margin-top: 8px;
        padding: 10px 12px;
        border-radius: 14px;
        background: rgba(15, 23, 42, 0.9);
        border: 1px dashed rgba(148, 163, 184, 0.6);
        font-size: 0.9rem;
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .round-info strong {
        color: #fbbf24;
      }

      .jar-row {
        display: flex;
        gap: 8px;
        margin-top: 4px;
        flex-wrap: wrap;
      }

      .jar-pill {
        padding: 6px 10px;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.9);
        border: 1px solid rgba(249, 115, 22, 0.7);
        font-size: 0.9rem;
        display: inline-flex;
        align-items: center;
        gap: 4px;
      }

      .jar-pill span.label {
        color: var(--muted);
        font-size: 0.78rem;
        text-transform: uppercase;
        letter-spacing: 0.08em;
      }

      .jar-pill span.value {
        font-weight: 600;
        color: var(--text);
      }

      .hint {
        font-size: 0.8rem;
        color: var(--muted);
        margin-top: 6px;
      }

      .timer-block {
        margin-top: 12px;
        padding: 10px 12px;
        border-radius: 14px;
        background: radial-gradient(
          circle at top,
          rgba(30, 64, 175, 0.65),
          #020617
        );
        border: 1px solid rgba(59, 130, 246, 0.7);
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
      }

      .timer-display {
        font-variant-numeric: tabular-nums;
        font-size: 1.8rem;
        font-weight: 600;
      }

      .timer-label {
        font-size: 0.8rem;
        text-transform: uppercase;
        letter-spacing: 0.14em;
        color: #bfdbfe;
      }

      .timer-controls {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        justify-content: flex-end;
      }

      button {
        border: none;
        cursor: pointer;
        border-radius: 999px;
        padding: 8px 14px;
        font-size: 0.85rem;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        transition: all 0.15s ease;
        background: #111827;
        color: var(--text);
      }

      button.primary {
        background: linear-gradient(135deg, #f97316, #fbbf24);
        color: #111827;
        font-weight: 600;
      }

      button.secondary {
        background: #020617;
        border: 1px solid rgba(148, 163, 184, 0.6);
        color: var(--muted);
      }

      button.ghost {
        background: transparent;
        color: var(--muted);
        border: 1px dashed rgba(75, 85, 99, 0.8);
      }

      button.danger {
        background: rgba(127, 29, 29, 0.95);
        color: #fecaca;
      }

      button.success {
        background: rgba(6, 95, 70, 0.95);
        color: #bbf7d0;
      }

      button:disabled {
        opacity: 0.45;
        cursor: default;
        transform: none !important;
      }

      button:hover:not(:disabled) {
        transform: translateY(-1px);
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
      }

      .reveal-panel {
        margin-top: 14px;
        padding: 12px 12px 10px;
        border-radius: 16px;
        border: 1px solid rgba(148, 163, 184, 0.7);
        background: rgba(15, 23, 42, 0.95);
        font-size: 0.9rem;
        display: none;
        flex-direction: column;
        gap: 8px;
      }

      .answer-text {
        font-size: 1rem;
        font-weight: 600;
        color: #fbbf24;
      }

      .answer-meta {
        font-size: 0.8rem;
        color: var(--muted);
      }

      .answer-actions {
        margin-top: 6px;
        display: flex;
        justify-content: flex-start;
        gap: 8px;
      }

      .side-panel-section {
        margin-bottom: 14px;
      }

      .side-panel-section h3 {
        margin: 0 0 6px;
        font-size: 0.9rem;
        color: var(--muted);
        text-transform: uppercase;
        letter-spacing: 0.12em;
      }

      .instructions {
        font-size: 0.84rem;
        color: var(--muted);
        line-height: 1.5;
      }

      .badge {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        font-size: 0.75rem;
        padding: 4px 8px;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.95);
        border: 1px solid rgba(148, 163, 184, 0.7);
        color: var(--muted);
      }

      .pill-row {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        font-size: 0.78rem;
      }

      .tiny-pill {
        border-radius: 999px;
        padding: 4px 7px;
        background: rgba(31, 41, 55, 0.9);
        border: 1px solid rgba(75, 85, 99, 0.9);
        color: var(--muted);
      }

      .note {
        font-size: 0.78rem;
        color: var(--muted);
        margin-top: 8px;
        opacity: 0.8;
      }
    </style>
  </head>
  <body>
    <div class="app">
      <header>
        <h1>
          <span class="icon">üëÉ</span>
          Scent Heads Up
        </h1>
        <div class="scoreboard">
          <span class="rounds"
            >Rounds: <strong id="rounds-count">0</strong></span
          >
          <span class="correct"
            >Correct: <strong id="correct-count">0</strong></span
          >
        </div>
      </header>

      <main>
        <!-- LEFT: Game controls -->
        <section class="panel" aria-label="Game Controls">
          <h2>Round Setup</h2>

          <div>
            <div class="categories" id="category-buttons">
              <!-- category buttons populated by JS -->
            </div>

            <div class="status-line">
              <div class="dot" id="status-dot"></div>
              <span id="status-text">Select a category to start a round.</span>
            </div>

            <div class="round-info" id="round-info" style="display: none">
              <div><strong id="round-category-label">Category: ‚Äì</strong></div>
              <div class="jar-row" id="jar-row">
                <!-- jar pills injected via JS -->
              </div>
              <div class="hint">
                Hand each jar to a different player. Don‚Äôt say the labels out
                loud ‚Äî only describe the smells.
              </div>
            </div>

            <div class="timer-block" aria-label="Round Timer">
              <div>
                <div class="timer-label">Countdown</div>
                <div class="timer-display" id="timer-display">02:00</div>
              </div>
              <div class="timer-controls">
                <button class="secondary" id="new-pair-btn" disabled>
                  üé≤ New Pair
                </button>
                <button class="ghost" id="reset-btn" disabled>‚èπ Reset</button>
                <button class="primary" id="start-btn" disabled>
                  ‚ñ∂ Start 2 min
                </button>
              </div>
            </div>

            <div class="reveal-panel" id="reveal-panel">
              <div class="answer-text" id="answer-text">Answer: ‚Äì</div>
              <div class="answer-meta" id="answer-meta"></div>
              <div class="answer-actions">
                <button class="success" id="correct-btn">
                  ‚úÖ We got it right
                </button>
                <button class="danger" id="incorrect-btn">
                  ‚ùå We missed it
                </button>
              </div>
              <div class="note">
                Scoring is on the honour system. Be honest with yourselves. üòâ
              </div>
            </div>
          </div>
        </section>

        <!-- RIGHT: Instructions / helper text -->
        <aside class="panel" aria-label="How to Play">
          <div class="side-panel-section">
            <h3>How to Play</h3>
            <div class="instructions">
              <ol>
                <li>Choose a <strong>category</strong>.</li>
                <li>
                  The screen will show you two <strong>jar numbers</strong>.
                </li>
                <li>Give each jar to a different player.</li>
                <li>Start the <strong>2 minute timer</strong>.</li>
                <li>
                  Each player smells their jar and describes it. Talk it out and
                  try to guess what the two scents combine into.
                </li>
                <li>
                  When the time is up, reveal the answer and mark whether you
                  were right or wrong.
                </li>
              </ol>
            </div>
          </div>

          <div class="side-panel-section">
            <h3>Current Settings</h3>
            <div class="badge">‚è± 2 min rounds</div>
            <div class="pill-row" style="margin-top: 6px">
              <div class="tiny-pill">Shared screen</div>
              <div class="tiny-pill">Honour-based scoring</div>
              <div class="tiny-pill">Re-usable scents</div>
            </div>
            <div class="note">
              You can change the scent pairs and jar numbers directly in the
              JavaScript <code>gameData</code> object.
            </div>
          </div>
        </aside>
      </main>
    </div>

    <script>
      // ----------------------------
      // Game data (EDIT THIS PART)
      // ----------------------------
      // Replace these with your real scent pairs and jar numbers.
      //
      // All pairs are within categories, so to add a pair to a category,
      // find the appropriate category object and add a new pair object to its
      // "pairs" array.
      //
      // To create a new category, copy an existing category object and change
      // its "id", "name", "description", and "pairs" values.

      const gameData = {
        categories: [
          {
            id: "locations",
            name: "Places / Locations",
            description: "Spaces you can stand in or move through.",
            pairs: [
              {
                id: "campfire",
                answer: "Campfire",
                jars: [1, 2], // Jar numbers on your physical jars
                scentLabels: ["Smoke", "Pine trees"],
              },
              {
                id: "farm",
                answer: "Farm",
                jars: [3, 4],
                scentLabels: ["Hay", "Manure"],
              },
            ],
          },
          {
            id: "food-drink",
            name: "Food & Drinks",
            description: "Edible things and beverages.",
            pairs: [
              {
                id: "bakery",
                answer: "Bakery",
                jars: [5, 6],
                scentLabels: ["Caramel", "Vanilla"],
              },
              {
                id: "coffee-shop",
                answer: "Coffee Shop",
                jars: [7, 8],
                scentLabels: ["Coffee", "Sweet pastry"],
              },
            ],
          },
          {
            id: "things",
            name: "Objects / Things",
            description: "Everyday objects or scenes.",
            pairs: [
              {
                id: "christmas-tree",
                answer: "Christmas Tree",
                jars: [9, 10],
                scentLabels: ["Pine", "Cinnamon / spices"],
              },
              {
                id: "beach-day",
                answer: "Beach Day",
                jars: [11, 12],
                scentLabels: ["Salt water", "Sunscreen / coconut"],
              },
            ],
          },
        ],
        roundDurationSeconds: 120,
      };

      // ----------------------------
      // State
      // ----------------------------
      let currentCategory = null;
      let currentPair = null;
      let timerSecondsRemaining = gameData.roundDurationSeconds;
      let timerIntervalId = null;
      let timerRunning = false;
      let timerFinished = false;
      let roundsPlayed = 0;
      let roundsCorrect = 0;

      // ----------------------------
      // DOM Elements
      // ----------------------------
      const categoryButtonsContainer =
        document.getElementById("category-buttons");
      const statusDot = document.getElementById("status-dot");
      const statusText = document.getElementById("status-text");
      const roundInfo = document.getElementById("round-info");
      const roundCategoryLabel = document.getElementById(
        "round-category-label"
      );
      const jarRow = document.getElementById("jar-row");
      const timerDisplay = document.getElementById("timer-display");
      const newPairBtn = document.getElementById("new-pair-btn");
      const resetBtn = document.getElementById("reset-btn");
      const startBtn = document.getElementById("start-btn");
      const revealPanel = document.getElementById("reveal-panel");
      const answerText = document.getElementById("answer-text");
      const answerMeta = document.getElementById("answer-meta");
      const correctBtn = document.getElementById("correct-btn");
      const incorrectBtn = document.getElementById("incorrect-btn");
      const roundsCountLabel = document.getElementById("rounds-count");
      const correctCountLabel = document.getElementById("correct-count");

      // ----------------------------
      // Helpers
      // ----------------------------
      function formatTime(seconds) {
        const m = Math.floor(seconds / 60)
          .toString()
          .padStart(2, "0");
        const s = (seconds % 60).toString().padStart(2, "0");
        return `${m}:${s}`;
      }

      function setTimer(seconds) {
        timerSecondsRemaining = seconds;
        timerDisplay.textContent = formatTime(timerSecondsRemaining);
      }

      function clearTimer() {
        if (timerIntervalId !== null) {
          clearInterval(timerIntervalId);
          timerIntervalId = null;
        }
        timerRunning = false;
      }

      function updateScoreboard() {
        roundsCountLabel.textContent = roundsPlayed;
        correctCountLabel.textContent = roundsCorrect;
      }

      function pickRandomPair(category) {
        const pairs = category.pairs;
        if (!pairs || pairs.length === 0) return null;
        const idx = Math.floor(Math.random() * pairs.length);
        return pairs[idx];
      }

      function updateStatus(text, live = false) {
        statusText.textContent = text;
        if (live) {
          statusDot.classList.add("live");
        } else {
          statusDot.classList.remove("live");
        }
      }

      function renderRoundInfo() {
        if (!currentCategory || !currentPair) {
          roundInfo.style.display = "none";
          return;
        }
        roundInfo.style.display = "flex";
        roundCategoryLabel.textContent = `Category: ${currentCategory.name}`;
        jarRow.innerHTML = "";
        currentPair.jars.forEach((jarNum, index) => {
          const pill = document.createElement("div");
          pill.className = "jar-pill";
          const labelSpan = document.createElement("span");
          labelSpan.className = "label";
          labelSpan.textContent = `Jar ${index + 1}`;
          const valueSpan = document.createElement("span");
          valueSpan.className = "value";
          valueSpan.textContent = `#${jarNum}`;
          pill.appendChild(labelSpan);
          pill.appendChild(valueSpan);
          jarRow.appendChild(pill);
        });
      }

      function resetRound(hardResetCategory = false) {
        clearTimer();
        setTimer(gameData.roundDurationSeconds);
        timerFinished = false;
        revealPanel.style.display = "none";

        if (hardResetCategory) {
          currentCategory = null;
          currentPair = null;
          roundInfo.style.display = "none";
          const buttons =
            categoryButtonsContainer.querySelectorAll(".category-btn");
          buttons.forEach((btn) => btn.classList.remove("active"));
          updateStatus("Select a category to start a round.", false);
          newPairBtn.disabled = true;
          resetBtn.disabled = true;
          startBtn.disabled = true;
        } else {
          // Keep currentCategory, but clear pair
          currentPair = null;
          roundInfo.style.display = "none";
          if (currentCategory) {
            updateStatus(
              "Press ‚ÄúNew Pair‚Äù to pick another combination in this category.",
              false
            );
            newPairBtn.disabled = false;
            resetBtn.disabled = false;
            startBtn.disabled = true;
          }
        }
      }

      function startTimer() {
        if (!currentPair || !currentCategory) return;
        if (timerRunning) return;

        timerRunning = true;
        timerFinished = false;
        revealPanel.style.display = "none";
        updateStatus(
          "Timer running ‚Äî describe your scents and guess together!",
          true
        );

        newPairBtn.disabled = true;
        resetBtn.disabled = false;
        startBtn.disabled = true;

        timerIntervalId = setInterval(() => {
          timerSecondsRemaining--;
          timerDisplay.textContent = formatTime(timerSecondsRemaining);

          if (timerSecondsRemaining <= 0) {
            clearTimer();
            timerFinished = true;
            updateStatus(
              "Time is up! Reveal the answer and mark your score.",
              false
            );
            showRevealPanel();
          }
        }, 1000);
      }

      function showRevealPanel() {
        if (!currentPair || !currentCategory) return;
        revealPanel.style.display = "flex";
        answerText.textContent = `Answer: ${currentPair.answer}`;
        // Optional meta info: both jar numbers and scent labels (for after the round).
        const labels =
          currentPair.scentLabels && currentPair.scentLabels.length
            ? currentPair.scentLabels
                .map(
                  (label, i) =>
                    `Jar ${i + 1} (#${currentPair.jars[i]}): ${label}`
                )
                .join(" ‚Ä¢ ")
            : `Jars: ${currentPair.jars
                .map((n, i) => `Jar ${i + 1} #${n}`)
                .join(" ‚Ä¢ ")}`;

        answerMeta.textContent = labels;
      }

      // ----------------------------
      // Event handlers
      // ----------------------------
      function handleCategoryClick(categoryId) {
        const cat = gameData.categories.find((c) => c.id === categoryId);
        if (!cat) return;

        // Set active button
        const buttons =
          categoryButtonsContainer.querySelectorAll(".category-btn");
        buttons.forEach((btn) => {
          if (btn.dataset.categoryId === categoryId) {
            btn.classList.add("active");
          } else {
            btn.classList.remove("active");
          }
        });

        currentCategory = cat;
        currentPair = pickRandomPair(cat);
        setTimer(gameData.roundDurationSeconds);
        revealPanel.style.display = "none";
        timerFinished = false;
        clearTimer();

        renderRoundInfo();
        newPairBtn.disabled = false;
        resetBtn.disabled = false;
        startBtn.disabled = false;

        updateStatus(
          `Playing in ‚Äú${cat.name}‚Äù. Hand out the jars, then start the timer.`,
          false
        );
      }

      newPairBtn.addEventListener("click", () => {
        if (!currentCategory) return;
        clearTimer();
        setTimer(gameData.roundDurationSeconds);
        timerFinished = false;
        revealPanel.style.display = "none";

        currentPair = pickRandomPair(currentCategory);
        renderRoundInfo();
        newPairBtn.disabled = false;
        resetBtn.disabled = false;
        startBtn.disabled = false;

        updateStatus(
          "New pair selected. Hand out the jars, then start the timer.",
          false
        );
      });

      resetBtn.addEventListener("click", () => {
        resetRound(true);
      });

      startBtn.addEventListener("click", () => {
        if (!currentPair || !currentCategory) return;
        startTimer();
      });

      correctBtn.addEventListener("click", () => {
        roundsPlayed++;
        roundsCorrect++;
        updateScoreboard();
        updateStatus(
          "Nice! Marked as correct. Choose another pair or switch category.",
          false
        );
        // Soft reset: keep category, allow a new pair
        resetRound(false);
      });

      incorrectBtn.addEventListener("click", () => {
        roundsPlayed++;
        updateScoreboard();
        updateStatus(
          "Marked as incorrect. Try another pair or switch category.",
          false
        );
        resetRound(false);
      });

      // ----------------------------
      // Initial render
      // ----------------------------
      function initCategories() {
        gameData.categories.forEach((cat) => {
          const btn = document.createElement("button");
          btn.className = "category-btn";
          btn.dataset.categoryId = cat.id;

          const labelSpan = document.createElement("span");
          labelSpan.className = "label";
          labelSpan.textContent = cat.name;

          const pillSpan = document.createElement("span");
          pillSpan.className = "pill";
          pillSpan.textContent = `${cat.pairs.length} pairs`;

          btn.appendChild(labelSpan);
          btn.appendChild(pillSpan);

          btn.addEventListener("click", () => handleCategoryClick(cat.id));
          categoryButtonsContainer.appendChild(btn);
        });
      }

      function init() {
        initCategories();
        setTimer(gameData.roundDurationSeconds);
        updateStatus("Select a category to start a round.", false);
        newPairBtn.disabled = true;
        resetBtn.disabled = true;
        startBtn.disabled = true;
        updateScoreboard();
      }

      init();
    </script>
  </body>
</html>
